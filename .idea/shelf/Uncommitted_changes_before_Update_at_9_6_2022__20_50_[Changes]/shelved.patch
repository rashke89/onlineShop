Index: backend/index.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>const express = require('express');\r\nconst bodyParser = require('body-parser');\r\nconst mongoose = require('mongoose');\r\nconst dbConfig = require('./config/dbConfig');\r\nconst Users = require('./models/userModel');\r\nconst serverConfig = require('./config/serverConfig');\r\n\r\nconst app = express();\r\nmongoose.connect(dbConfig.MONGODB_URL)\r\n    .then(data => console.log('MONGO DB is connected.'))\r\n    .catch(err => console.log(`Error while connecting to MONGO DB: ${err}`));\r\n\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json());\r\n\r\napp.post('/api/login', (req, res) => {\r\n    const reqBody = req.body;\r\n\r\n    const foundUser = Users.findOne(reqBody, (err, data) => {\r\n        console.log(data);\r\n        if (err) {\r\n            const errorMsg = `Error on getting user from DB: ${err}`;\r\n            console.log(errorMsg);\r\n            res.send(errorMsg);\r\n            return;\r\n        }\r\n\r\n        // way 1\r\n        // if (data)\r\n        //     res.send(data);\r\n        // else\r\n        //     res.send('User not found.');\r\n\r\n        // way 2\r\n        // res.send(data ? data : 'User not found.');\r\n\r\n        // way 3\r\n        res.send(data || 'User not found.');\r\n\r\n    });\r\n});\r\n\r\napp.post('/api/register', async (req, res) => {\r\n    const reqBody = req.body;\r\n    // console.log('reg user data:', reqBody);\r\n\r\n    Users.findOne(reqBody,  async (err, data) => {\r\n        console.log(data);\r\n        if (err) {\r\n            const errorMsg = `Error on register user: ${err}`;\r\n            console.log(errorMsg);\r\n            res.send(errorMsg);\r\n            return;\r\n        }\r\n\r\n        if (data)\r\n            res.send(`user already exist: ${data.username}`);\r\n        else {\r\n            const newUser = new Users(reqBody);\r\n            const saveNewUser = await newUser.save();\r\n            console.log(saveNewUser);\r\n\r\n            res.send(saveNewUser || 'User not registered.');\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n// get one user: GET method, URL: 'api/user/:username', {username} is URL param\r\n// get all users: GET method, URL: 'api/users',\r\n// edit user: PUT method, URL: 'api/user/:username',\r\n\r\napp.listen(serverConfig.port, err => {\r\n    if (err) {\r\n        console.log(err);\r\n    }\r\n    else {\r\n        console.log(serverConfig.serverRunningMsg);\r\n        console.log(serverConfig.link);\r\n    }\r\n});\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/backend/index.js b/backend/index.js
--- a/backend/index.js	(revision 86528366b1a699870e93416bc6a6e467fdc4cf89)
+++ b/backend/index.js	(date 1654117484222)
@@ -66,7 +66,6 @@
 
 });
 
-
 // get one user: GET method, URL: 'api/user/:username', {username} is URL param
 // get all users: GET method, URL: 'api/users',
 // edit user: PUT method, URL: 'api/user/:username',
